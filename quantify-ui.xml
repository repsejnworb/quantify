<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">
   <Script file="quantify-ui.lua"/>
   
   <Frame name="ViewWindowTemplate" virtual="true">
      <Backdrop bgFile="Interface\FrameGeneral\UI-BACKGROUND-ROCK" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="4" right="4" top="4" bottom="4" />
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="256" />
      </TileSize>
      <EdgeSize>
        <AbsValue val="16" />
      </EdgeSize>
    </Backdrop>
	</Frame>
	
	<Font name="StatRowLabelFont" justifyH="LEFT" inherits="GameFontNormal">
	  <Color r="1.0" g="1.0" b="1.0" a="1.0" />
	</Font>
	
	<Font name="StatRowValueFont" justifyH="RIGHT" inherits="GameFontNormal">
	  <Color r="1.0" g="0.82" b="0" a="1.0"/>
	</Font>
	
	<Script file="Templates\QuantifyStatRowTemplate.lua" />
	<Button name="QuantifyStatRowTemplate" enableMouse="true" virtual="true">
		<NormalTexture file="Interface\ACHIEVEMENTFRAME\UI-Achievement-StatsBackground.blp">
		  <Color r=".2" g=".1" b=".2" a=".8"/>
		</NormalTexture>
		<HighlightTexture file="Interface\ACHIEVEMENTFRAME\UI-Achievement-StatsBackground.blp">
		  <Color r=".5" g=".5" b=".b" a=".5"/>
		</HighlightTexture>
		<Size>
		  <AbsDimension x="470" y="30"/>
		</Size>
		<Frames>
		  <Button name="$parentLabel">
		    <NormalFont style="StatRowLabelFont" enableMouse="false"/>
			<Size>
			  <AbsDimension x="10" y="10" />
			</Size>
			<Anchors>
			  <Anchor point="LEFT">
			    <Offset>
				  <AbsDimension x="10" y="0" />
				</Offset>
			  </Anchor>
			</Anchors>
			<Scripts>
			  <OnLoad>
				self:SetButtonState("NORMAL",true);
			  </OnLoad>
			</Scripts>
		  </Button>
		  <Button name="$parentValue" enableMouse="false">
		    <NormalFont style="StatRowValueFont"/>
			<Size>
			  <AbsDimension x="20" y="10" />
			</Size>
			<Anchors>
			  <Anchor point="RIGHT">
				<Offset>
				  <AbsDimension x="-30" y="0" />
				</Offset>
			  </Anchor>
			</Anchors>
			<Scripts>
			  <OnLoad>	  
				self:SetButtonState("NORMAL",true);
		      </OnLoad>	
			</Scripts>
		  </Button>
		</Frames>
		<Scripts>
		  <OnLoad>
		  </OnLoad>
		  <OnDoubleClick>
			QuantifyStatRowTemplate_OnDoubleClick(self)
		  </OnDoubleClick>
		</Scripts>
	</Button>
	
	<Button name="QuantifyWatchListRowTemplate" inherits="QuantifyStatRowTemplate" virtual="true">
		<NormalTexture>
		  <Color r=".2" g=".1" b=".2" a="0"/>
		</NormalTexture>
		<HighlightTexture file="Interface\ACHIEVEMENTFRAME\UI-Achievement-StatsBackground.blp">
		  <Color r=".5" g=".5" b=".b" a=".3"/>
		</HighlightTexture>
		<Scripts>
		  <OnLoad>
			self:RegisterForDrag("LeftButton");
		  </OnLoad>
		  <OnDragStart>
			self:GetParent():StartMoving()
		  </OnDragStart>
		  <OnDragStop>
			self:GetParent():StopMovingOrSizing();
		  </OnDragStop>
		  <OnDoubleClick>
			QuantifyWatchListRowTemplate_OnDoubleClick(self)
		  </OnDoubleClick>
		</Scripts>
	</Button>
	
	<Button name="QuantifyPlusButton" inherits="MagicButtonTemplate" virtual="true">
		<NormalTexture file="Interface\Buttons\UI-PlusButton-Up">
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-PlusButton-Down">
		</PushedTexture>
		<HighlightTexture file="Interface\Buttons\UI-PlusButton-Hilight" alphaMode="ADD"/>
	</Button>
  
  <Script file="Templates\QuantifyWatchList.lua" />
  <Frame name="QuantifyWatchList" toplevel="true" parent="UIParent" movable="true" enableMouse="true" hidden="true" inherits="ViewWindowTemplate">
	<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background.blp" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="4" right="4" top="4" bottom="4" />
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="256" />
      </TileSize>
      <EdgeSize>
        <AbsValue val="16" />
      </EdgeSize>
	</Backdrop>
	<Size>
		<AbsDimension x="200" y="200"/>
	</Size>
	<Anchors>
		<Anchor point="CENTER">
			<Offset>
				<AbsDimension x="500" y="-104"/>
			</Offset>
		</Anchor>
	</Anchors>
	<Scripts>
	  <OnLoad>
		self:RegisterForDrag("LeftButton");
		QuantifyWatchList_Initialize(self,5,30);
	  </OnLoad>
	  <OnDragStart>
		self:StartMoving();
	  </OnDragStart>
	  <OnDragStop>
		self:StopMovingOrSizing();
	  </OnDragStop>
	  <OnUpdate>
		quantify:updateWatchlist(self)
	  </OnUpdate>
	</Scripts>
  </Frame>

   
  <Frame name="QuantifyContainer_Frame" toplevel="true" parent="UIParent" movable="true" enableMouse="true" inherits="ViewWindowTemplate" hidden="true">
		<Size>
			<AbsDimension x="500" y="350"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER">
				<Offset>
					<AbsDimension x="500" y="-104"/>
				</Offset>
			</Anchor>
		</Anchors>
		<HitRectInsets>
			<AbsInset left="0" right="30" top="0" bottom="45"/>
		</HitRectInsets>
		<Frames>
			<CheckButton name="QuantifyWatchListCheckbox" inherits="OptionsBaseCheckButtonTemplate">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="15" y="-10"/>
						</Offset>
					</Anchor>
				</Anchors>		
				<Scripts>
				  <OnLoad>
					self:SetChecked(false)
				  </OnLoad>
				  <OnClick>
					quantify:toggleWatchlist(QuantifyWatchList,self);
				  </OnClick>
				</Scripts>
			</CheckButton>
			<Button name="QuantifyCloseButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="TOPRIGHT">
					</Anchor>
				</Anchors>
			</Button>
			<Frame name="SelectSegmentDropdown" inherits="UIDropDownMenuTemplate" >
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset>
							<AbsDimension x="30" y="-10"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parentSelected" inherits="GameFontNormal">
							<Anchors>
								<Anchor point="LEFT">
									<Offset>
										<AbsDimension x="26" y="1"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						quantify:SelectSegmentDropdown_OnLoad(self);
					</OnLoad>
					<OnShow>
						quantify:SelectSegmentDropdown_OnShow(self);
					</OnShow>
				</Scripts>
			</Frame>
			<Button name="AddSegmentButton" inherits="QuantifyPlusButton">
			    <Anchors>
				  <Anchor point="TOPLEFT">
				    <Offset>
						<AbsDimension x="270" y="-13"/>
					</Offset>
				  </Anchor>
				</Anchors>
				<Scripts>
				  <OnLoad>
					quantify:AddSegmentButton_initialize(self);
					SquareButton_SetIcon(self, "ADD");
				  </OnLoad>
				  <OnClick>
					quantify:AddSegmentButton_OnClick(self)
				  </OnClick>
				</Scripts>
			</Button>
			<Frame name="SelectModuleDropdown" inherits="UIDropDownMenuTemplate" >
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-20" y="-10"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parentSelected" inherits="GameFontNormal">
							<Anchors>
								<Anchor point="LEFT">
									<Offset>
										<AbsDimension x="26" y="1"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnLoad>
						quantify:SelectModuleDropdown_OnLoad(self);
					</OnLoad>
					<OnShow>
						quantify:SelectModuleDropdown_OnShow(self);
					</OnShow>
				</Scripts>
			</Frame>			
			<Frame name="ViewAllStats_Container" setAllPoints="true">
				<Size>
					<AbsDimension y="300" x="470" />
				</Size>
				<Anchors>
				  <Anchor point="BOTTOMLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT">
					<Offset>
					  <AbsDimension x="4" y="4"/>
					</Offset>
				  </Anchor>
				</Anchors>

				<Layers>
					<Layer level="BACKGROUND">
						<Texture>
							<!-- <Color r=".5" g=".75" b=".8" a="0.8" /> -->
						</Texture>
					</Layer>
				</Layers>
				<Frames>		
				 <ScrollFrame name="ViewAllStats_Frame" setAllPoints="true" inherits="FauxScrollFrameTemplate">
					
					 <Scripts>
						<OnVerticalScroll>
						  FauxScrollFrame_OnVerticalScroll(self, offset, quantify.STAT_ROW_HEIGHT, quantify.ViewAllStats_Update);
						</OnVerticalScroll>
						<OnLoad>
						  quantify:FauxScrollFrame_OnLoad(self, quantify.STAT_ROW_HEIGHT, quantify.NUM_STAT_ROWS, quantify.VIEW_STATS_BUTTON_PREFIX, quantify.ViewAllStats_Update);
						</OnLoad>
					 </Scripts>
				  </ScrollFrame>

				</Frames>
			</Frame>
			
		</Frames>
		<Scripts>
		  <OnLoad>
		    self:RegisterForDrag("LeftButton");
        QuantifyCloseButton:HookScript("OnClick", quantify.uiCloseButton)
		  </OnLoad>
		  <OnDragStart>
		    self:StartMoving()
		  </OnDragStart>
		  <OnDragStop>
		    self:StopMovingOrSizing();
		  </OnDragStop>
		  <OnUpdate>
			quantify:updateUi()
		  </OnUpdate>
		</Scripts>
	</Frame>
	
</Ui>